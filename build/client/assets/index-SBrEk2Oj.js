import{r as u,j as e}from"./index-_b-vxSi4.js";import{n as L,W as S,M as v,j as G,$ as M,z as p,Q as h,F as U,e as Q,u as J,a as W,b as ze,g as _,p as ne,L as ee,c as Pe,d as Te,x as X,f as Ie,h as Oe,i as te,k as fe,S as Xe,o as Ce,l as Le,m as Ve,q as Ue,T as Y,r as Ke,D as Fe,s as $e,t as qe,v as he,w as Me,y as De,A as Ae,B as Re,C as Ye,E as Ze}from"./index-Bhg9DOVY.js";import{u as Ge}from"./embla-carousel-react.esm-DDFcFn3T.js";import{T as Qe}from"./Trans-C0NJhNgC.js";var We=u.createContext({}),ae=t=>{let[s,a]=u.useState(""),i=u.useCallback(()=>{a("")},[]);return e.jsx(We.Provider,{value:{searchValue:s,onSearchValueChange:a,clearSearchValue:i,symbol:t.symbol,onSymbolChange:t.onSymbolChange},children:t.children})};function I(){return u.useContext(We)}var Je=t=>e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:[e.jsx("mask",{id:"a",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"16",height:"16",children:e.jsx("path",{fill:"#D9D9D9",d:"M0 0h16v16H0z"})}),e.jsx("g",{mask:"url(#a)",children:e.jsx("path",{d:"M3.333 12.667h.95L10.8 6.15l-.95-.95-6.517 6.517zM2.667 14a.65.65 0 0 1-.475-.192.65.65 0 0 1-.192-.475v-1.616a1.32 1.32 0 0 1 .383-.934l8.417-8.4q.2-.183.442-.283.24-.1.508-.1.267 0 .517.1.249.1.433.3l.917.933q.2.184.291.434a1.44 1.44 0 0 1 0 1.008 1.25 1.25 0 0 1-.291.442l-8.4 8.4a1.32 1.32 0 0 1-.933.383zm7.65-8.317L9.85 5.2l.95.95z"})})]}),et=t=>e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:e.jsx("path",{d:"M7.205 1.334c-.345 0-.674.136-.918.38L6.001 2H2.667a.667.667 0 1 0 0 1.334h10.667a.667.667 0 1 0 0-1.334h-3.333l-.287-.286a1.3 1.3 0 0 0-.918-.38zM2.911 4.667l1.018 8.842c.088.66.656 1.158 1.322 1.158h5.498c.666 0 1.235-.497 1.323-1.163l1.019-8.837z"})}),tt=t=>e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:[e.jsx("mask",{id:"a",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"12",height:"12",children:e.jsx("path",{fill:"#D9D9D9",d:"M0 0h12v12H0z"})}),e.jsx("g",{mask:"url(#a)",children:e.jsx("path",{d:"M8.5 10a.48.48 0 0 1-.356-.144A.48.48 0 0 1 8 9.5V7q0-.213.144-.356A.48.48 0 0 1 8.5 6.5h1q.212 0 .356.144A.48.48 0 0 1 10 7v2.5q0 .212-.144.356A.48.48 0 0 1 9.5 10zm-3 0a.48.48 0 0 1-.356-.144A.48.48 0 0 1 5 9.5v-7q0-.212.144-.356A.48.48 0 0 1 5.5 2h1q.213 0 .356.144A.48.48 0 0 1 7 2.5v7q0 .212-.144.356A.48.48 0 0 1 6.5 10zm-3 0a.48.48 0 0 1-.356-.144A.48.48 0 0 1 2 9.5V5q0-.213.144-.356A.48.48 0 0 1 2.5 4.5h1q.212 0 .356.144A.48.48 0 0 1 4 5v4.5q0 .212-.144.356A.48.48 0 0 1 3.5 10z"})})]}),at=t=>e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:e.jsx("path",{d:"M5.993.958a.416.416 0 0 0-.41.422v.416a.416.416 0 1 0 .832 0V1.38a.416.416 0 0 0-.422-.422M2.749 2.29a.416.416 0 0 0-.29.714l.291.292a.416.416 0 1 0 .589-.588l-.292-.292a.42.42 0 0 0-.298-.126m6.489 0a.42.42 0 0 0-.286.126l-.292.292a.416.416 0 1 0 .588.588l.292-.292a.416.416 0 0 0-.302-.714m-3.239.753a2.895 2.895 0 0 0-2.913 2.914A2.86 2.86 0 0 0 4.751 8.58v1.123c0 .458.374.833.832.833h.832a.835.835 0 0 0 .833-.833V8.58a2.86 2.86 0 0 0 1.665-2.622 2.895 2.895 0 0 0-2.914-2.914M1.421 5.541a.416.416 0 1 0 0 .833h.417a.416.416 0 1 0 0-.833zm8.74 0a.416.416 0 1 0 0 .833h.416a.417.417 0 1 0 0-.833zM3.037 8.492a.42.42 0 0 0-.287.126l-.291.292a.416.416 0 1 0 .588.588l.292-.292a.416.416 0 0 0-.302-.714m5.913 0a.416.416 0 0 0-.29.714l.292.292a.416.416 0 1 0 .588-.588l-.292-.292a.42.42 0 0 0-.298-.126"})}),le=t=>e.jsxs("svg",{width:"20",height:"21",viewBox:"0 0 20 21",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:[e.jsx("mask",{id:"a",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"20",height:"21",children:e.jsx("path",{fill:"#D9D9D9",d:"M0 .5h20v20H0z"})}),e.jsx("g",{mask:"url(#a)",children:e.jsx("path",{d:"m10 14.074-3.2 1.913a.6.6 0 0 1-.332.068.6.6 0 0 1-.277-.101.5.5 0 0 1-.186-.256.5.5 0 0 1-.005-.336l.84-3.556-2.82-2.394a.5.5 0 0 1-.174-.281.6.6 0 0 1 .013-.315.5.5 0 0 1 .173-.252.55.55 0 0 1 .305-.112l3.693-.33 1.467-3.393a.57.57 0 0 1 .211-.255A.54.54 0 0 1 10 4.39q.16 0 .292.083.131.082.211.255l1.467 3.414 3.693.309q.178.014.305.123.126.11.173.262t.002.304a.56.56 0 0 1-.183.27l-2.8 2.395.84 3.556a.5.5 0 0 1-.005.336.5.5 0 0 1-.186.256.6.6 0 0 1-.277.101.6.6 0 0 1-.332-.068z"})})]}),pe=t=>e.jsxs("svg",{width:"20",height:"21",viewBox:"0 0 20 21",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:[e.jsx("mask",{id:"a",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"20",height:"21",children:e.jsx("path",{fill:"#D9D9D9",d:"M0 .5h20v20H0z"})}),e.jsx("g",{mask:"url(#a)",children:e.jsx("path",{d:"M7.333 14.396 10 12.813l2.688 1.583-.709-3 2.313-1.98-3.063-.27L10 6.292 8.77 9.146l-3.062.27 2.334 1.98zM10 14.074l-3.2 1.913a.6.6 0 0 1-.332.068.6.6 0 0 1-.277-.101.5.5 0 0 1-.186-.256.5.5 0 0 1-.005-.336l.84-3.556-2.82-2.394a.5.5 0 0 1-.174-.281.6.6 0 0 1 .013-.315.5.5 0 0 1 .173-.252.55.55 0 0 1 .305-.112l3.693-.33 1.467-3.393a.57.57 0 0 1 .211-.255A.54.54 0 0 1 10 4.39q.16 0 .292.083.131.082.211.255l1.467 3.414 3.693.309q.178.014.305.123.126.11.173.262t.002.304a.56.56 0 0 1-.183.27l-2.8 2.395.84 3.556a.5.5 0 0 1-.005.336.5.5 0 0 1-.186.256.6.6 0 0 1-.277.101.6.6 0 0 1-.332-.068z"})})]}),se=t=>e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:e.jsx("path",{d:"M5.841 1.14a4.667 4.667 0 0 0 0 9.333 4.74 4.74 0 0 0 2.875-.975l2.54 2.56a.6.6 0 0 0 .838 0 .6.6 0 0 0 0-.838L9.537 8.677a4.72 4.72 0 0 0 .971-2.871 4.667 4.667 0 0 0-4.667-4.667m0 1.166a3.5 3.5 0 1 1 0 7 3.5 3.5 0 0 1 0-7"})}),st=t=>e.jsx("svg",{width:"20",height:"21",viewBox:"0 0 20 21",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:e.jsx("path",{d:"M10 5.5a.76.76 0 0 0-.583.25l-4.334 4c0 .083-.083.25-.083.333 0 .25.167.417.417.417h2.916v6.667c0 .416.334.833.834.833h1.666c.5 0 .834-.417.834-.833V10.5h2.916c.25 0 .417-.167.417-.417 0-.083-.083-.25-.083-.333l-4.25-4.084c-.25-.083-.417-.166-.667-.166M2.177 3.06A.8.8 0 0 1 2.5 3h15a.834.834 0 1 1 0 1.667h-15a.833.833 0 0 1-.323-1.607"})}),Z=t=>e.jsx("svg",{width:"12",height:"13",viewBox:"0 0 12 13",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.015.34h-.029a5.98 5.98 0 0 0-3.93 1.477c-.074.065-.027.184.072.184h7.745c.099 0 .146-.119.072-.184A5.98 5.98 0 0 0 6.015.341M3.48 7.866a.23.23 0 0 1 .187.1A2.85 2.85 0 0 0 6 9.178a2.85 2.85 0 0 0 2.334-1.213.23.23 0 0 1 .186-.1h3.104c.09 0 .155.086.13.172A6 6 0 0 1 6 12.327a6 6 0 0 1-5.755-4.29.134.134 0 0 1 .13-.172zM8.26 4.6a.29.29 0 0 0 .229.116h3.11c.09 0 .156-.086.13-.173a6 6 0 0 0-1.106-2.03.22.22 0 0 0-.165-.077H1.543a.22.22 0 0 0-.165.077 6 6 0 0 0-1.105 2.03.134.134 0 0 0 .13.173h3.11A.29.29 0 0 0 3.74 4.6 2.85 2.85 0 0 1 6 3.488c.92 0 1.738.436 2.26 1.112m.414 2.717c-.02.055.02.115.079.115h3.033a.135.135 0 0 0 .133-.112 6 6 0 0 0-.015-2.058.135.135 0 0 0-.133-.11H8.72c-.06 0-.1.061-.078.117a2.83 2.83 0 0 1 .032 2.048m-5.427.115c.06 0 .1-.06.079-.115a2.84 2.84 0 0 1 .032-2.048.085.085 0 0 0-.078-.118H.23a.135.135 0 0 0-.134.11A6 6 0 0 0 .08 7.32c.01.065.067.112.133.112z"})}),je=t=>e.jsx("svg",{width:"12",height:"13",viewBox:"0 0 12 13",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:e.jsx("path",{d:"M6.012 1.72c-.286 0-.577.178-.75.532L4.2 4.438l-2.42.344c-.78.108-1.03.872-.47 1.42l1.75 1.703-.407 2.39c-.133.773.508 1.24 1.203.874.268-.142 1.648-.857 2.155-1.124l2.155 1.124c.695.367 1.339-.1 1.202-.874l-.421-2.39 1.749-1.702c.565-.547.326-1.31-.453-1.421l-2.436-.344L6.76 2.252c-.172-.354-.464-.531-.75-.531"})}),ve=t=>e.jsx("svg",{width:"12",height:"13",viewBox:"0 0 12 13",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:e.jsx("path",{d:"M6.012 1.72c-.286 0-.577.178-.75.532L4.2 4.438l-2.42.344c-.78.108-1.03.872-.47 1.42l1.75 1.703-.407 2.39c-.133.773.508 1.24 1.203.874.268-.142 1.648-.857 2.155-1.124l2.155 1.124c.695.367 1.339-.1 1.202-.874l-.421-2.39 1.749-1.702c.565-.547.326-1.31-.453-1.421l-2.436-.344L6.76 2.252c-.172-.354-.464-.531-.75-.531m0 1.297 1.03 2.108c.073.15.211.242.375.266l2.343.343-1.702 1.64a.48.48 0 0 0-.14.437l.405 2.312L6.246 9.03a.5.5 0 0 0-.468 0L3.7 10.123l.39-2.296a.52.52 0 0 0-.14-.453l-1.687-1.64 2.327-.328a.52.52 0 0 0 .39-.28z"})}),we=t=>e.jsx("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:e.jsx("path",{d:"M2.01 2.915a.667.667 0 1 0 0 1.334h12a.667.667 0 0 0 0-1.334zM7.343 13.59a.667.667 0 0 0 1.333 0V7.88l2 1.98.937-.938L8.49 5.777a.686.686 0 0 0-.959 0L4.405 8.923l.938.937 2-1.979z"})}),ye=t=>e.jsx("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:e.jsx("path",{d:"M4.67 2.203A2.667 2.667 0 0 0 2.005 4.87v6.667a2.667 2.667 0 0 0 2.667 2.666h6.666a2.667 2.667 0 0 0 2.667-2.666V4.87a2.667 2.667 0 0 0-2.667-2.667zm1.334 3.334c.17 0 .349.057.48.187l1.52 1.52 1.52-1.52a.68.68 0 0 1 .48-.187c.17 0 .349.057.48.187.26.26.26.698 0 .959l-1.521 1.52 1.52 1.52c.26.262.26.699 0 .96a.687.687 0 0 1-.958 0L8.004 9.162l-1.52 1.52a.687.687 0 0 1-.96 0 .687.687 0 0 1 0-.958l1.521-1.52-1.52-1.521a.687.687 0 0 1 0-.96.68.68 0 0 1 .479-.186"})}),it=t=>e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:[e.jsx("mask",{id:"a",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"16",height:"16",children:e.jsx("path",{d:"M0 0h16v16H0z"})}),e.jsx("g",{mask:"url(#a)",children:e.jsx("path",{d:"M7.333 8.667h-4V7.333h4v-4h1.333v4h4v1.334h-4v4H7.333z"})})]}),rt=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:[e.jsx("path",{d:"M5.99536 1.46487C5.71936 1.46487 5.49536 1.68887 5.49536 1.96487V5.46487H1.99536C1.71936 5.46487 1.49536 5.68887 1.49536 5.96487C1.49536 6.24087 1.71936 6.46487 1.99536 6.46487H5.49536V9.96487C5.49536 10.2409 5.71936 10.4649 5.99536 10.4649C6.27136 10.4649 6.49536 10.2409 6.49536 9.96487V6.46487H9.99536C10.2714 6.46487 10.4954 6.24087 10.4954 5.96487C10.4954 5.68887 10.2714 5.46487 9.99536 5.46487H6.49536V1.96487C6.49536 1.68887 6.27136 1.46487 5.99536 1.46487Z",fill:"url(#paint0_linear_1951_55156)"}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"paint0_linear_1951_55156",x1:"10.4954",y1:"5.96487",x2:"1.49536",y2:"5.96487",gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{stopColor:"rgb(var(--oui-gradient-brand-end))"}),e.jsx("stop",{offset:"1",stopColor:"rgb(var(--oui-gradient-brand-start))"})]})})]}),ot=t=>e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:e.jsx("path",{d:"M6.326 8.826a.84.84 0 0 0-.6.234L2.16 12.627v-2.135H.492v4.167c0 .46.373.833.834.833h4.166v-1.667H3.357l3.567-3.567a.857.857 0 0 0 0-1.198.84.84 0 0 0-.598-.234M10.502.492V2.16h2.135L9.07 5.726a.857.857 0 0 0 0 1.199.86.86 0 0 0 1.197 0l3.568-3.568v2.135h1.667V1.326a.834.834 0 0 0-.834-.834z"})}),nt=t=>e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:e.jsx("path",{d:"M14.668.492a.85.85 0 0 0-.599.234l-3.567 3.568V2.159H8.835v4.167c0 .46.373.833.833.833h4.167V5.492H11.7l3.569-3.567a.86.86 0 0 0 0-1.199.85.85 0 0 0-.6-.234m-12.5 8.334v1.666h2.135L.736 14.06a.86.86 0 0 0 0 1.198.86.86 0 0 0 1.198 0l3.568-3.567v2.134h1.666V9.66a.834.834 0 0 0-.833-.833z"})}),Ee=t=>e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:e.jsx("path",{d:"M3.003 3.998a.494.494 0 0 0-.39.797l3 4c.2.266.597.266.797 0l3-4a.5.5 0 0 0-.407-.797z"})}),lt=t=>e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:e.jsx("path",{d:"M9.186 3.348a.67.67 0 0 0-.436.27l-2.657 4a.69.69 0 0 0 0 .75l2.657 4a.68.68 0 0 0 .934.188.685.685 0 0 0 .187-.937L7.463 7.993 9.87 4.37a.685.685 0 0 0-.187-.938.65.65 0 0 0-.498-.083"})}),ut=t=>{let{emblaRef:s,emblaApi:a,scrollIndex:i,enableScroll:r,news:o,gainers:n,losers:l,total24Amount:d,totalOpenInterest:m,tvl:g,favorite:b}=t,{onSymbolChange:f}=I(),{t:x}=L(),c=v("oui-flex-[0_0_calc((100%_-_32px)_/_3)] 3xl:oui-flex-[0_0_calc((100%_-_48px)_/_4)] oui-min-w-0",r&&"oui-select-none oui-cursor-pointer"),j=w=>{f==null||f(w),b.addToHistory(w)};return e.jsxs("div",{id:"oui-markets-header",className:"oui-overflow-hidden",ref:r?s:void 0,children:[e.jsxs(p,{width:"100%",gapX:4,mt:4,children:[e.jsx(dt,{total24Amount:d,totalOpenInterest:m,tvl:g,className:c}),e.jsx(xe,{data:o,title:e.jsx(h.gradient,{color:"brand",children:x("markets.newListings")}),className:c,onSymbol:j}),e.jsx(xe,{data:n,title:e.jsx(h,{className:"oui-text-success-light",children:x("markets.topGainers")}),className:c,onSymbol:j}),e.jsx(xe,{data:l,title:e.jsx(h,{className:"oui-text-danger-light",children:x("markets.topLosers")}),className:c,onSymbol:j})]}),e.jsx("div",{className:"oui-mt-1 oui-mb-3  3xl:oui-mt-4 3xl:oui-mb-0",children:e.jsx(ht,{scrollIndex:i,scrollPrev:a==null?void 0:a.scrollPrev,scrollNext:a==null?void 0:a.scrollNext})})]})},dt=t=>{let{total24Amount:s,totalOpenInterest:a,tvl:i}=t,{t:r}=L(),o=u.useMemo(()=>[{label:e.jsxs(p,{gapX:1,children:[e.jsx(Z,{})," ",r("markets.column.24hVolume")]}),value:s},{label:e.jsxs(p,{gapX:1,children:[e.jsx(Z,{})," ",r("markets.openInterest")]}),value:a},{label:e.jsxs(p,{gapX:1,children:[e.jsx(Z,{})," ",`${r("common.assets")} (TVL)`]}),value:i}],[s,a,i]);return e.jsx(p,{direction:"column",justify:"between",width:"100%",height:236,className:t.className,children:o==null?void 0:o.map((n,l)=>e.jsx(ct,{...n},l))})},ct=t=>e.jsxs(S,{intensity:900,r:"lg",px:4,py:3,width:"100%",children:[e.jsx(h,{as:"div",intensity:36,size:"xs",weight:"semibold",children:t.label}),e.jsx(h.numeral,{size:"base",currency:"$",dp:t.dp||0,rm:_.ROUND_DOWN,rule:t.rule,children:t.value})]}),xe=t=>{var s;return e.jsxs(S,{intensity:900,r:"lg",py:4,pb:2,height:236,className:t.className,children:[e.jsx(S,{px:4,children:e.jsx(h.gradient,{color:"brand",size:"sm",weight:"semibold",children:t.title})}),e.jsx(p,{direction:"column",itemAlign:"start",mt:2,children:(s=t.data)==null?void 0:s.map((a,i)=>e.jsx(mt,{item:a,onSymbol:t.onSymbol},a.symbol))})]})},mt=t=>{let{item:s}=t;return e.jsxs(p,{width:"100%",gapX:3,py:2,px:4,className:v("hover:oui-bg-base-8 oui-cursor-pointer",t.className),onClick:()=>{t.onSymbol(s)},children:[e.jsx(p,{width:"100%",gapX:1,children:e.jsx(h.formatted,{rule:"symbol",formatString:"base",size:"xs",weight:"semibold",showIcon:!0,children:s.symbol})}),e.jsx(p,{width:"100%",justify:"end",children:e.jsx(h.numeral,{currency:"$",size:"xs",weight:"semibold",dp:s.quote_dp,children:s["24h_close"]})}),e.jsx(p,{width:"100%",justify:"end",children:e.jsx(h.numeral,{rule:"percentages",coloring:!0,size:"xs",weight:"semibold",showIdentifier:!0,children:s.change})})]})},ht=t=>{let{scrollIndex:s,scrollPrev:a,scrollNext:i}=t;return e.jsx(p,{gapX:1,justify:"center",className:"3xl:oui-hidden",children:[0,1].map(r=>e.jsx(S,{py:1,pl:r===0?1:0,pr:r===1?1:0,onClick:()=>{s===0&&r===1?i==null||i():s===1&&r===0&&(a==null||a())},className:"oui-cursor-pointer",children:e.jsx(S,{width:8,height:4,r:"full",className:v("oui-transition-all oui-duration-300",s===r?"oui-bg-base-contrast-36 oui-w-4":"oui-bg-base-contrast-20")},r)},r))})};function oe(t,s){let{sortKey:a,sortOrder:i}=s||{},r=[...t||[]],o=n=>n==null;return a&&i&&r.sort((n,l)=>{let d=n[a],m=l[a];return o(d)?1:o(m)?-1:i==="desc"?m-d:d-m}),r}function ie(t,s){let[a,i]=u.useState(t),r=u.useCallback(n=>{let l=n?{sortKey:n.sortKey,sortOrder:n.sort}:void 0;i(l),s==null||s(l)},[]),o=u.useCallback(n=>oe(n,a),[a]);return{sort:a,onSort:r,getSortedList:o}}function re(t,s="",a){if(!s)return t;let i=new RegExp(s,"i"),r=s.toLowerCase(),o=[],n=[],l=[];t==null||t.forEach(m=>{let g=ge(m.symbol,a),b=g.toLowerCase();i.test(g)&&(b===r?o.push(m):b.startsWith(r)?n.push(m):l.push(m))});let d=(m,g)=>{let b=ge(m.symbol,a),f=ge(g.symbol,a);return b<f?-1:b>f?1:0};return n.sort(d),l.sort(d),[...o,...n,...l]}function ge(t,s="base"){let a=t.split("_"),i=a[0],r=a[1],o=a[2];return s.replace("type",i).replace("base",r).replace("quote",o)}function xt(){let[t,s]=u.useState(0),[a,i]=u.useState(0);return u.useEffect(()=>{s(window.innerWidth),i(window.innerHeight);let r=()=>{i(window.innerHeight),s(window.innerWidth)};return window==null||window.addEventListener("resize",r),()=>{window==null||window.removeEventListener("resize",r)}},[]),{width:t,height:a}}var gt=()=>{let[t,s]=u.useState(0),a=pt(),{width:i}=xt(),[r,o]=Ge({loop:!0,slidesToScroll:"auto"});return u.useEffect(()=>{o==null||o.on("select",()=>{s(o==null?void 0:o.selectedScrollSnap())})},[o]),{scrollIndex:t,setScrollIndex:s,emblaRef:r,emblaApi:o,enableScroll:i<1440,...a}};function pt(){let[t,s]=J(W.ALL),{data:a}=ze("/v1/public/balance/stats"),i=u.useMemo(()=>oe(t,{sortKey:"created_time",sortOrder:"desc"}).slice(0,5),[t]),r=u.useMemo(()=>oe(t,{sortKey:"change",sortOrder:"desc"}).slice(0,5),[t]),o=u.useMemo(()=>oe(t,{sortKey:"change",sortOrder:"asc"}).slice(0,5),[t]),n=u.useMemo(()=>(t==null?void 0:t.reduce((m,g)=>m.add(g["24h_amount"]||0),new _(0)))||new _(0),[t]),l=u.useMemo(()=>(t==null?void 0:t.reduce((m,g)=>m.add(g.openInterest||0),new _(0)))||new _(0),[t]),d=u.useMemo(()=>{if(!a)return 0;let{total_holding:m=0}=a;return new _(m).toNumber()},[a]);return{markets:t,news:i,gainers:r,losers:o,total24Amount:n.toNumber(),totalOpenInterest:l.toNumber(),tvl:d,favorite:s}}var bt=()=>{let t=gt();return e.jsx(ut,{...t})},ft=t=>{var V;let{open:s,setOpen:a,container:i,inputRef:r,inputWidth:o,spanRef:n,editing:l,value:d,onValueChange:m,updateCurTab:g,onEdit:b,addTab:f,delTab:x,size:c="default",scrollable:j}=t,{t:w}=L(),{selectedFavoriteTab:y,favoriteTabs:N,updateSelectedFavoriteTab:A}=t.favorite,R=c==="sm"?28:36,z=c==="sm"?18:24,C=(d==null?void 0:d.length)>15,F="oui-bg-gradient-to-r oui-from-[rgb(var(--oui-gradient-brand-start)_/_0.12)] oui-to-[rgb(var(--oui-gradient-brand-end)_/_0.12)]",E=k=>{Ze.confirm({title:w("markets.favorites.tabs.delete.dialog.title"),content:e.jsx(h,{size:"sm",children:w("markets.favorites.tabs.delete.dialog.description",{name:k.name})}),onOk(){return x(k),Promise.resolve()}})},K=k=>{k.key==="Enter"&&g(C)},$=k=>e.jsxs(p,{gapX:2,itemAlign:"center",px:2,py:1,children:[e.jsx(Je,{className:"oui-cursor-pointer oui-text-base-contrast-36 hover:oui-text-base-contrast",onClick:()=>{b(k)}}),e.jsx(et,{className:"oui-cursor-pointer oui-text-base-contrast-36 hover:oui-text-base-contrast",onClick:()=>{E(k)}})]}),H=()=>{let k=N.length>=10,O=e.jsx(p,{className:v("oui-inline-flex",k?"oui-cursor-not-allowed":"oui-cursor-pointer",k?"oui-bg-base-3":F),width:R,height:z,r:"base",justify:"center",itemAlign:"center",onClick:k?void 0:f,children:k?e.jsx(it,{className:"oui-z-[1] oui-size-3 oui-text-base-contrast-54"}):e.jsx(rt,{className:"oui-size-3"})});return k?e.jsx(X,{content:e.jsx(h,{size:"2xs",intensity:80,children:"Maximum 10 groups in the favorite list"}),className:"oui-bg-base-6",delayDuration:0,arrow:{className:"oui-fill-base-6"},children:O}):O},T=k=>e.jsx(X,{open:C,content:e.jsx(h,{size:"2xs",intensity:80,children:"List name cannot exceed 15 characters"}),className:"oui-bg-base-6",delayDuration:0,sideOffset:0,children:e.jsx(U,{ref:r,style:C?{width:o}:{"--oui-gradient-angle":"270deg",backgroundClip:"text",WebkitTextFillColor:"transparent",WebkitBackgroundClip:"text",width:o},classNames:{root:v("oui-my-px oui-rounded oui-p-0 oui-px-2","focus-within:oui-outline-transparent focus-visible:oui-outline-none",c==="sm"?"oui-h-[18px]":"oui-h-[24px]",k&&v(C?"oui-bg-danger/15":F)),input:v("oui-font-semibold oui-caret-[rgba(217,217,217,1)]",C?"oui-text-danger":"oui-text-transparent oui-gradient-brand ",c==="sm"?"oui-text-2xs":"oui-text-sm")},value:d,onValueChange:m,onBlur:()=>{g(C)},onKeyUp:K,autoComplete:"off"})}),D=(k,O)=>{if(l&&O)return T(O);let P={weight:"semibold",size:c==="sm"?"2xs":"sm",className:c==="sm"?"oui-leading-[18px]":"oui-leading-[24px]",as:"div"},me=O?e.jsx(h.gradient,{color:"brand",angle:270,...P,children:k.name}):e.jsx(h,{...P,children:k.name});return e.jsx(S,{r:"base",px:2,height:z,className:v("oui-cursor-pointer oui-select-none",O?"oui-markets-favorites-active-tab-item":"oui-markets-favorites-tab-item",O?F:"oui-bg-line-6 oui-text-base-contrast-36 hover:oui-text-base-contrast"),onClick:()=>{A(k),O&&a(!0)},children:me})};return e.jsxs(p,{width:"100%",gapX:3,className:t.className,children:[e.jsxs(p,{ref:i,id:"oui-markets-favorites-tabs-container",className:v("oui-hide-scrollbar oui-relative oui-cursor-pointer","oui-overflow-hidden oui-overflow-x-auto"),gapX:c==="sm"?2:3,width:"100%",children:[(V=N==null?void 0:N.slice(0,10))==null?void 0:V.map(k=>{let O=y.id===k.id;return e.jsx(X,{open:O&&!l?s:!1,onOpenChange:P=>{O&&a(P)},content:$(k),delayDuration:0,className:v("oui-bg-base-5"),arrow:{className:"oui-fill-base-5"},children:D(k,O)},k.id)}),!j&&H(),e.jsx(h,{size:"xs",ref:n,className:"oui-invisible",children:d})]}),j&&H()]})};function jt(t){let{favorite:s,size:a="default"}=t,{favorites:i,favoriteTabs:r,selectedFavoriteTab:o,updateFavoriteTabs:n,updateSelectedFavoriteTab:l,updateFavorites:d}=s,[m,g]=u.useState(!1),[b,f]=u.useState(!1),[x,c]=u.useState(""),[j,w]=u.useState(!1),y=u.useRef(null),N=u.useRef(null),A=u.useRef(null),[R,z]=u.useState(50),C=()=>{setTimeout(()=>{let{scrollWidth:T,clientWidth:D}=y.current||{};T>D&&w(!0)},0)},F=()=>{setTimeout(()=>{y.current&&(y.current.scrollLeft=y.current.scrollWidth-y.current.clientWidth)},0)},E=T=>{f(!0),c(T.name),setTimeout(()=>{var D,V;(D=N.current)==null||D.focus(),(V=N.current)==null||V.setSelectionRange(-1,-1)},0)},K=T=>{n({...o,name:T?o.name:x},{update:!0}),f(!1),g(!1),C()},$=()=>{let T={name:`WatchList_${r.length}`,id:Date.now()};n(T,{add:!0}),l(T),C(),F()},H=T=>{n(T,{delete:!0}),setTimeout(()=>{let D=i.map(O=>{var P;return{...O,tabs:(P=O.tabs)==null?void 0:P.filter(me=>me.id!==T.id)}});d(D);let V=r.filter(O=>O.id!==T.id),k=(V==null?void 0:V[(V==null?void 0:V.length)-1])||(V==null?void 0:V[0]);l(k)},0)};return u.useEffect(()=>{var T;if(x){let D=(T=A.current)==null?void 0:T.getBoundingClientRect(),V=a==="sm"?0:14;z(Math.max(((D==null?void 0:D.width)||0)+V,50))}},[x]),u.useEffect(()=>{C()},[]),{favorite:s,open:m,setOpen:g,container:y,inputRef:N,inputWidth:R,spanRef:A,editing:b,value:x,onValueChange:c,onEdit:E,updateCurTab:K,addTab:$,delTab:H,scrollable:j}}var Be=t=>{let{className:s,...a}=t,i=jt(a);return e.jsx(ft,{...i,size:t.size,className:s})},vt=t=>{var z;let{symbol:s,favoriteTabs:a,open:i,onOpenChange:r,inputVisible:o,selectedTabs:n,value:l,onValueChange:d,hide:m,hideInput:g,showInput:b,onCheck:f,addTab:x,confirm:c}=t,{t:j}=L(),w=(l==null?void 0:l.length)>15,y=()=>{if(o)return e.jsxs(S,{children:[e.jsxs(p,{gapX:2,children:[e.jsx(U,{autoFocus:!0,value:l,onValueChange:d,classNames:{root:v("oui-ml-px oui-h-7 oui-w-full oui-rounded-sm oui-bg-base-6",w&&"focus-within:oui-outline-danger focus-visible:oui-outline-danger")},autoComplete:"off",suffix:l&&e.jsx(S,{mr:2,children:e.jsx(Q,{opacity:1,size:14,className:"oui-cursor-pointer oui-text-base-contrast-20",onClick:()=>{d("")}})})}),e.jsx(he,{className:"oui-rounded-sm",size:"sm",onClick:x,disabled:!l||w,children:j("common.add")})]}),w&&e.jsxs(p,{itemAlign:"center",gapX:1,mt:1,children:[e.jsx("div",{className:"oui-size-1 oui-rounded-full oui-bg-danger"}),e.jsx(h,{color:"danger",children:j("markets.favorites.tabs.maxName")})]})]});let C=a.length>=10;return e.jsx(X,{open:C?void 0:!1,content:e.jsx(h,{size:"2xs",intensity:80,children:j("markets.favorites.tabs.maxList")}),className:"oui-bg-base-6",delayDuration:0,arrow:{className:"oui-fill-base-6"},children:e.jsx("div",{children:e.jsxs(p,{className:v(C?"oui-cursor-not-allowed":"oui-cursor-pointer"),itemAlign:"center",gapX:2,p:2,intensity:C?500:600,onClick:C?void 0:b,height:28,r:"base",children:[e.jsx(Ye,{size:14,className:"oui-text-base-contrast-36",opacity:1}),e.jsx(h,{className:"",intensity:20,children:j("markets.favorites.dropdown.addPlaceholder")})]})})})},N=e.jsxs(p,{justify:"between",className:"oui-mb-[10px] oui-mt-3",children:[e.jsxs(p,{gapX:1,children:[j("markets.favorites.dropdown.title"),e.jsx(h.formatted,{rule:"symbol",formatString:"base-type",size:"base",showIcon:!0,children:s})]}),e.jsx(Fe,{size:16,className:"oui-cursor-pointer oui-text-base-contrast",onClick:m})]}),A=e.jsxs(S,{children:[e.jsx(S,{my:2,className:"oui-custom-scrollbar oui-max-h-[288px] oui-overflow-y-auto",children:(z=a==null?void 0:a.slice(0,10))==null?void 0:z.map(C=>{let F=!!n.find(E=>E.id===C.id);return e.jsx(S,{className:"oui-cursor-pointer",children:e.jsxs(p,{className:"oui-gap-x-[6px] hover:oui-bg-base-6",p:2,r:"md",onClick:()=>{f(C,F)},children:[F?e.jsx($e,{size:18,className:"oui-text-base-contrast-80"}):e.jsx(qe,{size:18,className:"oui-text-base-contrast-80"}),e.jsx(h,{intensity:54,children:C.name})]})},C.id)})}),e.jsx(S,{mt:3,pb:5,children:y()})]}),R=e.jsxs(p,{gapX:3,mt:3,children:[e.jsx(he,{color:"gray",onClick:m,fullWidth:!0,className:"oui-text-sm",size:"md",children:j("common.cancel")},"secondary"),e.jsx(he,{onClick:c,fullWidth:!0,className:"oui-text-sm",size:"md",children:j("common.confirm")},"primary")]});return e.jsxs(Me,{open:i,onOpenChange:r,children:[e.jsx(De,{asChild:!0,children:t.children}),e.jsx(Ae,{children:e.jsx(Re,{onCloseAutoFocus:C=>C.preventDefault(),onClick:C=>C.stopPropagation(),align:"start",alignOffset:-12,sideOffset:24,className:"oui-markets-favorite-dropdown-menu-content oui-bg-base-8",children:e.jsx(S,{px:5,pb:5,width:360,children:e.jsxs(h,{as:"div",size:"sm",weight:"semibold",children:[N,e.jsx(fe,{}),A,R]})})})})]})};function wt(t){let{symbol:s}=t.row||{},{favorites:a,favoriteTabs:i,updateFavoriteTabs:r,updateSymbolFavoriteState:o}=t.favorite,[n,l]=u.useState(!1),[d,m]=u.useState(!1),[g,b]=u.useState(""),[f,x]=u.useState([]),c=()=>{l(!1)},j=()=>{m(!0)},w=()=>{m(!1)},y=()=>{b(""),w(),x([])},N=()=>{let z={name:g||`WatchList_${i.length}`,id:Date.now()};r(z,{add:!0}),y()},A=(z,C)=>{x(C?f==null?void 0:f.filter(F=>F.id!==z.id):[...f,z]),w()},R=()=>{o(t.row,f,!1),l(!1)};return u.useEffect(()=>{var C;if(!n)return;let z=a==null?void 0:a.find(F=>F.name===s);(C=z==null?void 0:z.tabs)!=null&&C.length&&x(z==null?void 0:z.tabs)},[n,a,i,s]),u.useEffect(()=>{n||y()},[n]),{symbol:s,favoriteTabs:i,open:n,onOpenChange:l,inputVisible:d,selectedTabs:f,value:g,onValueChange:b,hide:c,hideInput:w,showInput:j,onCheck:A,addTab:N,confirm:R}}var ue=t=>{let s=wt(t);return e.jsx(vt,{...s,children:t.children})},He=(t,s=!1)=>{let{t:a}=L();return u.useMemo(()=>[{title:e.jsx(pe,{className:"oui-mt-1"}),dataIndex:"isFavorite",align:"center",width:30,render:(i,r)=>{let o=e.jsx(p,{width:"100%",height:"100%",mr:3,justify:"center",itemAlign:"center",onClick:s?n=>{t.updateSymbolFavoriteState(r,t.selectedFavoriteTab,!0),n.stopPropagation()}:void 0,"data-testid":"oui-testid-markets-table-row-favorite-icon",children:i?e.jsx(le,{className:"oui-text-[rgba(255,154,46,1)]"}):e.jsx(pe,{className:"oui-text-base-contrast-36 hover:oui-text-[rgba(255,154,46,1)]"})});return s?o:e.jsx(ue,{row:r,favorite:t,children:o})}},{title:a("markets.column.market"),dataIndex:"symbol",width:90,render:i=>e.jsx(h.formatted,{rule:"symbol",formatString:"base-type",size:"xs",weight:"semibold",showIcon:!0,children:i})},{title:a("common.price"),dataIndex:"24h_close",width:100,align:"right",onSort:!0,render:(i,r)=>e.jsx(h.numeral,{dp:r.quote_dp||2,currency:"$",children:i})},{title:a("markets.column.24hChange"),dataIndex:"change",width:100,align:"right",onSort:!0,render:i=>e.jsx(h.numeral,{rule:"percentages",coloring:!0,rm:_.ROUND_DOWN,showIdentifier:!0,children:i})},{title:e.jsxs(p,{gapX:1,children:[e.jsx(Z,{})," ",a("markets.column.24hVolume")]}),dataIndex:"24h_amount",width:100,align:"right",onSort:!0,render:i=>e.jsx(h.numeral,{currency:"$",dp:0,rm:_.ROUND_DOWN,children:i})},{title:e.jsxs(p,{gapX:1,children:[e.jsx(Z,{})," ",a("markets.openInterest")]}),dataIndex:"openInterest",width:100,align:"right",onSort:!0,render:i=>e.jsx(h.numeral,{currency:"$",dp:0,rm:_.ROUND_DOWN,children:i})},{title:a("markets.dataList.column.8hFunding"),dataIndex:"8h_funding",width:100,align:"right",onSort:!0,render:i=>i===null?"--":e.jsx(h.numeral,{rule:"percentages",coloring:!0,dp:4,rm:_.ROUND_DOWN,showIdentifier:!0,children:i})},{dataIndex:"action",type:"action",width:40,render:(i,r)=>s?e.jsx(p,{justify:"end",mr:4,children:e.jsx(X,{content:a("markets.dataList.column.moveTop"),align:"center",delayDuration:0,children:e.jsx(S,{className:"oui-hidden oui-cursor-pointer group-hover:oui-block",onClick:o=>{o.stopPropagation(),t.pinToTop(r)},"data-testid":"oui-markets-favorites-pinned-icon",children:e.jsx(st,{className:"oui-text-base-contrast-20 hover:oui-text-base-contrast"})})})}):null}],[t,s,a])},yt=He,St=t=>{let{dataSource:s,favorite:a,onSort:i,loading:r,pagination:o}=t,{symbol:n,onSymbolChange:l}=I(),d=yt(a,!0);return e.jsxs("div",{children:[e.jsx(Be,{favorite:a,className:"oui-my-3"}),e.jsx(ee,{bordered:!0,columns:d,dataSource:s,emptyView:e.jsx(p,{className:"oui-text-xs oui-text-base-contrast-36",children:e.jsx(Qe,{i18nKey:"markets.dataList.favorites.empty",components:[e.jsx(pe,{className:"oui-text-base-contrast-36"},"0")]})}),loading:r,onRow:(m,g)=>({className:v("oui-h-[55px] oui-cursor-pointer"),onClick:()=>{l==null||l(m),a.addToHistory(m)}}),generatedRowKey:m=>m.symbol,rowSelection:{[n]:!0},onSort:i,pagination:o,manualSorting:!0})]})},Nt=()=>{let{setPage:t,pagination:s}=ne({pageSize:10}),[a,i]=J(W.FAVORITES),[r,o]=u.useState(!0),{favorites:n,selectedFavoriteTab:l}=i,{searchValue:d}=I(),{onSort:m,getSortedList:g}=ie(),b=u.useMemo(()=>{var c,j;let x=(j=(c=n==null?void 0:n.filter(w=>{var y;return((y=w.tabs)==null?void 0:y.findIndex(N=>N.id===l.id))!==-1}))==null?void 0:c.map(w=>{let y=a==null?void 0:a.findIndex(N=>N.symbol===w.name);return y!==-1?a[y]:null}))==null?void 0:j.filter(w=>!!w);return re(x,d,"base-type")},[a,l,n,d]),f=u.useMemo(()=>g(b),[b,g]);return u.useEffect(()=>{o(!1)},[n]),u.useEffect(()=>{t(1)},[d]),{loading:r,dataSource:f,favorite:i,onSort:m,pagination:s}},Ct=()=>{let t=Nt();return e.jsx(St,{...t})},kt=t=>{let{loading:s,dataSource:a,favorite:i,onSort:r,initialSort:o,type:n,pagination:l}=t,{symbol:d,onSymbolChange:m}=I(),g=He(i,!1);return e.jsx(ee,{bordered:!0,columns:g,loading:s,dataSource:a,onRow:(b,f)=>({className:v("oui-h-[55px] oui-cursor-pointer"),onClick:()=>{m==null||m(b),i.addToHistory(b)},"data-testid":`oui-testid-markets-${n==="new"?"newListing":"all"}-tr-${b.symbol}`}),generatedRowKey:b=>b.symbol,rowSelection:{[d]:!0},onSort:r,initialSort:o,pagination:l,classNames:{header:"oui-h-12"},manualSorting:!0})},_t=t=>{let[s,a]=u.useState(!0),{setPage:i,pagination:r}=ne({pageSize:10}),[o,n]=J(W.ALL),{searchValue:l}=I(),{onSort:d,getSortedList:m,sort:g}=ie(t.initialSort),b=u.useMemo(()=>{let x=re(o,l,"base-type");return m(x)},[o,m,l]);u.useEffect(()=>{a(!1)},[o]),u.useEffect(()=>{i(1)},[l]),u.useEffect(()=>{t.type==="all"&&n.updateTabsSortState("all",g==null?void 0:g.sortKey,g==null?void 0:g.sortOrder)},[g,t.type]);let f=u.useMemo(()=>{var c,j,w;let x=t.type==="all"?(c=n.tabSort)==null?void 0:c.all:void 0;return{sortKey:(x==null?void 0:x.sortKey)||((j=t==null?void 0:t.initialSort)==null?void 0:j.sortKey),sort:(x==null?void 0:x.sortOrder)||((w=t==null?void 0:t.initialSort)==null?void 0:w.sortOrder)}},[n.tabSort,t.initialSort,t.type]);return{loading:s,dataSource:b,favorite:n,onSort:d,pagination:r,initialSort:f}},ke=t=>{let s=_t(t);return e.jsx(kt,{...s,type:t.type})},zt=t=>{let{activeTab:s,onTabChange:a}=t,{t:i}=L(),{searchValue:r,onSearchValueChange:o,clearSearchValue:n}=I(),l=e.jsx(U,{value:r,onValueChange:o,placeholder:i("markets.search.placeholder"),className:"oui-my-1 oui-w-[240px]",size:"sm","data-testid":"oui-testid-markets-searchMarket-input",prefix:e.jsx(S,{pl:3,pr:1,children:e.jsx(se,{className:"oui-text-base-contrast-36"})}),suffix:r&&e.jsx(S,{mr:2,children:e.jsx(Q,{size:14,className:"oui-cursor-pointer oui-text-base-contrast-36",onClick:n})}),autoComplete:"off"});return e.jsx(S,{id:"oui-markets-list",intensity:900,p:6,r:"2xl",children:e.jsxs(G,{variant:"contained",size:"xl",value:s,onValueChange:a,trailing:l,children:[e.jsx(M,{title:i("markets.favorites"),icon:e.jsx(le,{}),value:"favorites",testid:"oui-testid-markets-favorites-tab",children:e.jsx(Ct,{})}),e.jsx(M,{title:i("markets.allMarkets"),icon:e.jsx(tt,{}),value:"all",testid:"oui-testid-markets-all-tab",children:e.jsx(ke,{type:"all",initialSort:{sortKey:"24h_amount",sortOrder:"desc"}})}),e.jsx(M,{title:i("markets.newListings"),icon:e.jsx(at,{}),value:"new",testid:"oui-testid-markets-newListings-tab",children:e.jsx(ke,{type:"new",initialSort:{sortKey:"created_time",sortOrder:"desc"}})})]})})};function Tt(){let[t,s]=u.useState("all"),{clearSearchValue:a}=I();return u.useEffect(()=>{a==null||a()},[t]),{activeTab:t,onTabChange:i=>s(i)}}var It=()=>{let t=Tt();return e.jsx(zt,{...t})},Ot=t=>{var r;let{symbol:s,onSymbolChange:a}=I(),{t:i}=L();return e.jsx("div",{className:"oui-custom-scrollbar oui-h-full oui-overflow-y-auto",children:e.jsx(p,{direction:"column",px:2,gapY:1,children:(r=t.dataSource)==null?void 0:r.map(o=>{let n=e.jsxs(p,{intensity:800,p:2,className:"oui-gap-x-7",r:"base",children:[e.jsxs(p,{direction:"column",itemAlign:"start",gapY:1,children:[e.jsxs(p,{gapX:1,children:[e.jsx(Y,{symbol:o.symbol,className:"oui-size-[18px]"}),e.jsx(h.formatted,{rule:"symbol",formatString:"base",size:"2xs",weight:"semibold",children:o.symbol})]}),e.jsx(h,{size:"2xs",intensity:36,children:i("markets.column.last")}),e.jsx(h,{size:"2xs",intensity:36,children:i("markets.column.24hPercentage")})]}),e.jsxs(p,{direction:"column",itemAlign:"end",gapY:1,children:[e.jsxs(te,{size:"xs",color:"primary",children:[o.leverage,"x"]}),e.jsx(h.numeral,{dp:o.quote_dp||2,currency:"$",size:"2xs",intensity:80,children:o["24h_close"]}),e.jsx(h.numeral,{rule:"percentages",coloring:!0,rm:_.ROUND_DOWN,showIdentifier:!0,size:"2xs",children:o.change})]})]});return e.jsx(X,{side:"right",sideOffset:6,content:n,delayDuration:0,children:e.jsxs(p,{direction:"column",justify:"center",itemAlign:"center",gapY:1,width:54,height:54,r:"lg",className:v("oui-cursor-pointer","hover:oui-bg-base-7",s===o.symbol&&"oui-bg-base-6 hover:oui-bg-base-6"),onClick:()=>{a==null||a(o)},children:[e.jsx(Y,{symbol:o.symbol,className:"oui-size-[18px]"}),e.jsx(h.numeral,{rule:"percentages",coloring:!0,rm:_.ROUND_DOWN,showIdentifier:!0,size:"2xs",children:o.change})]})},o.symbol)})})})},Lt=(t,s=!1)=>{let{t:a}=L();return[{title:a("markets.column.market&Volume"),dataIndex:"24h_amount",onSort:!0,className:"oui-h-[36px]",render:(i,r)=>{let o;return s||(o=e.jsx(ue,{row:r,favorite:t,children:e.jsx(p,{width:12,height:12,justify:"center",itemAlign:"center",className:"oui-mr-1 oui-cursor-pointer",children:r.isFavorite?e.jsx(je,{className:"oui-size-3 oui-text-[rgba(255,154,46,1)]"}):e.jsx(ve,{className:"oui-size-3 oui-text-base-contrast-36 hover:oui-text-[rgba(255,154,46,1)]"})})})),e.jsxs(p,{children:[o,e.jsxs(p,{direction:"column",itemAlign:"start",gapY:1,children:[e.jsxs(p,{gapX:1,children:[e.jsx(Y,{symbol:r.symbol,className:"oui-size-[18px]"}),e.jsx(h.formatted,{rule:"symbol",formatString:"base",size:"2xs",weight:"semibold",children:r.symbol}),e.jsxs(te,{size:"xs",color:"primary",children:[r.leverage,"x"]})]}),e.jsx(h.numeral,{intensity:54,size:"2xs",rule:"human",dp:2,rm:_.ROUND_DOWN,children:i})]})]})}},{title:a("markets.column.price&Change"),dataIndex:"change",align:"right",onSort:!0,className:"oui-h-[36px]",render:(i,r)=>{let o=d=>{t.updateSymbolFavoriteState(r,t.selectedFavoriteTab,!0),d.stopPropagation()},n="oui-w-4 oui-h-4 oui-text-base-contrast-54 hover:oui-text-base-contrast",l=e.jsx("div",{className:v("oui-absolute oui-right-0 oui-top-[6.5px]","oui-hidden group-hover:oui-block"),children:e.jsxs(p,{className:v("oui-inline-flex","oui-bg-primary-darken oui-py-[6px]"),r:"base",width:52,justify:"center",itemAlign:"end",gapX:2,children:[e.jsx(we,{className:n,onClick:d=>{d.stopPropagation(),t.pinToTop(r)}}),e.jsx(ye,{className:n,onClick:o})]})});return e.jsxs("div",{className:"oui-relative",children:[s&&l,e.jsxs(p,{direction:"column",justify:"end",itemAlign:"end",gapY:1,className:v(s&&"group-hover:oui-invisible"),children:[e.jsx(h.numeral,{dp:r.quote_dp||2,size:"2xs",children:r["24h_close"]}),e.jsx(h.numeral,{rule:"percentages",coloring:!0,rm:_.ROUND_DOWN,showIdentifier:!0,size:"2xs",children:i})]})]})}}]},Vt=t=>{var c,j,w,y;let{loading:s,dataSource:a,favorite:i,onSort:r,initialSort:o,getColumns:n,collapsed:l,isFavoritesList:d,renderHeader:m}=t,{symbol:g,onSymbolChange:b}=I(),f=Lt(i,d),x=typeof n=="function"?n(i,d):f;return l?e.jsx(Ot,{dataSource:a}):e.jsxs(e.Fragment,{children:[m==null?void 0:m(i),e.jsx(ee,{classNames:{root:(c=t.tableClassNames)==null?void 0:c.root,body:(j=t.tableClassNames)==null?void 0:j.body,header:v("oui-h-9",(w=t.tableClassNames)==null?void 0:w.header),scroll:(y=t.tableClassNames)==null?void 0:y.scroll},columns:x,loading:s,dataSource:a,onRow:(N,A)=>({className:v("oui-h-[53px]",t.rowClassName),onClick:()=>{b==null||b(N),i.addToHistory(N)}}),generatedRowKey:N=>N.symbol,rowSelection:{[g]:!0},onSort:r,initialSort:o?{sortKey:o.sortKey,sort:o.sortOrder}:void 0,manualSorting:!0})]})},Ft={all:W.ALL,favorites:W.FAVORITES,recent:W.RECENT,newListing:W.NEW_LISTING},Mt=t=>{let[s,a]=u.useState(!0),[i,r]=J(Ft[t.type]||W.ALL),{favorites:o,selectedFavoriteTab:n}=r,{searchValue:l}=I(),{onSort:d,getSortedList:m}=ie(t.initialSort,t.onSort),g=u.useMemo(()=>{let f=typeof t.dataFilter=="function"?t.dataFilter(i,{favorites:o,selectedFavoriteTab:n}):i,x=re(f,l,"base");return m(x)},[i,m,l,t.dataFilter,o,n]);u.useEffect(()=>{a(!1)},[i]);let b=t.type==="favorites";return{loading:s,dataSource:g,favorite:r,onSort:d,isFavoritesList:b}},de=t=>{let s=Mt(t);return e.jsx(Vt,{...s,initialSort:t.initialSort,getColumns:t.getColumns,collapsed:t.collapsed,tableClassNames:t.tableClassNames,rowClassName:t.rowClassName,renderHeader:t.renderHeader})};function Se(){let t=u.useCallback(a=>e.jsx(S,{px:3,className:"oui-my-[6px]",children:e.jsx(Be,{favorite:a,size:"sm"})}),[]),s=u.useCallback((a,i)=>{var n,l;let{favorites:r,selectedFavoriteTab:o}=i;return(l=(n=r==null?void 0:r.filter(d=>{var m;return((m=d.tabs)==null?void 0:m.findIndex(g=>g.id===o.id))!==-1}))==null?void 0:n.map(d=>{let m=a==null?void 0:a.findIndex(g=>g.symbol===d.name);return m!==-1?a[m]:null}))==null?void 0:l.filter(d=>d)},[]);return{renderHeader:t,dataFilter:s}}var Dt=t=>{let{activeTab:s,onTabChange:a,tabSort:i,onTabSort:r}=t,{searchValue:o,onSearchValueChange:n,clearSearchValue:l}=I(),{t:d}=L(),m=e.jsx(U,{value:o,onValueChange:n,placeholder:d("markets.search.placeholder"),classNames:{root:"oui-border oui-mt-[1px] oui-border-line"},size:"sm",prefix:e.jsx(S,{pl:3,pr:1,children:e.jsx(se,{className:"oui-text-base-contrast-36"})}),suffix:o&&e.jsx(S,{mr:2,children:e.jsx(Q,{size:14,className:"oui-cursor-pointer oui-text-base-contrast-36",onClick:l})}),autoComplete:"off"}),g="oui-h-[calc(100%_-_36px)]",{renderHeader:b,dataFilter:f}=Se(),x=c=>{let j=c==="favorites"?{renderHeader:b,dataFilter:f}:{};return e.jsx("div",{className:g,children:e.jsx(de,{type:c,initialSort:i[c],onSort:r(c),tableClassNames:{scroll:v("oui-px-1",c==="favorites"?"oui-pb-9":"oui-pb-2")},...j})})};return e.jsxs(S,{className:v("oui-overflow-hidden oui-font-semibold"),height:"100%",children:[e.jsx(S,{px:3,pb:2,children:m}),e.jsxs(G,{variant:"contained",size:"md",value:s,onValueChange:a,classNames:{tabsList:v("oui-my-[6px]"),tabsContent:"oui-h-full",scrollIndicator:"oui-mx-3"},className:g,showScrollIndicator:!0,children:[e.jsx(M,{title:d("markets.favorites"),icon:e.jsx(le,{}),value:"favorites",children:x("favorites")}),e.jsx(M,{title:d("markets.recent"),value:"recent",children:x("recent")}),e.jsx(M,{title:d("common.all"),value:"all",children:x("all")}),e.jsx(M,{title:d("markets.newListings"),value:"newListing",children:x("newListing")})]})]})},Ne="orderly_side_markets_tab_sort";function ce(t){let[s,a]=Ke(t.storageKey,{all:{sortKey:"24h_amount",sortOrder:"desc"}}),i=u.useCallback(r=>o=>{a({...s,[r]:o})},[s]);return{tabSort:s,onTabSort:i}}function At(t){let[s,a]=u.useState(t.activeTab),{tabSort:i,onTabSort:r}=ce({storageKey:Ne}),{clearSearchValue:o}=I(),n=u.useCallback(l=>{typeof(t==null?void 0:t.onTabChange)=="function"?t.onTabChange(l):a(l)},[t==null?void 0:t.onTabChange]);return u.useEffect(()=>{a((t==null?void 0:t.activeTab)||"favorites")},[t==null?void 0:t.activeTab]),u.useEffect(()=>{o==null||o()},[s]),{activeTab:s,onTabChange:n,tabSort:i,onTabSort:r}}var Rt=t=>{let s=At({activeTab:t.activeTab,onTabChange:t.onTabChange});return e.jsx(ae,{symbol:t.symbol,onSymbolChange:t.onSymbolChange,children:e.jsx(Dt,{...s})})},B=(t=5)=>s=>s===0?e.jsx(h,{children:" - "}):e.jsx(h.numeral,{rule:"percentages",dp:t,coloring:!0,rm:_.ROUND_DOWN,showIdentifier:!0,children:s}),Wt=(t,s)=>{let{t:a}=L();return[{title:a("markets.column.market"),dataIndex:"symbol",width:120,render:i=>e.jsx(h.formatted,{rule:"symbol",formatString:"base-type",size:"xs",weight:"semibold",showIcon:!0,children:i})},{title:a("markets.funding.column.estFunding"),dataIndex:"estFunding",width:120,onSort:!0,render:(i,r)=>e.jsxs("div",{children:[e.jsx(h.numeral,{rule:"percentages",dp:5,coloring:!0,rm:_.ROUND_DOWN,showIdentifier:!0,children:i}),e.jsx("span",{className:"oui-text-base-contrast-54",children:`/ ${r.fundingInterval}h`})]})},{title:a("markets.funding.column.lastFunding"),dataIndex:"lastFunding",width:90,onSort:!0,render:B()},{title:a("markets.funding.column.1dAvg"),dataIndex:"funding1d",width:90,onSort:!0,render:B()},{title:a("markets.funding.column.3dAvg"),dataIndex:"funding3d",width:90,onSort:!0,render:B()},{title:a("markets.funding.column.7dAvg"),dataIndex:"funding7d",width:90,onSort:!0,render:B()},{title:a("markets.funding.column.14dAvg"),dataIndex:"funding14d",width:90,onSort:!0,render:B()},{title:a("markets.funding.column.30dAvg"),dataIndex:"funding30d",width:90,onSort:!0,render:B()},{title:a("markets.funding.column.90dAvg"),dataIndex:"funding90d",width:90,onSort:!0,render:B()},{title:e.jsxs("div",{className:"oui-flex oui-gap-1",children:[e.jsx("select",{value:t,onChange:i=>s(i.target.value),onClick:i=>i.stopPropagation(),className:"oui-w-12 oui-rounded-md oui-border oui-border-line oui-bg-[var(--oui-table-background-color)]",children:[{label:a("common.select.1d"),value:"1dPositive"},{label:a("common.select.3d"),value:"3dPositive"},{label:a("common.select.7d"),value:"7dPositive"},{label:a("common.select.14d"),value:"14dPositive"},{label:a("common.select.30d"),value:"30dPositive"},{label:a("common.select.90d"),value:"90dPositive"}].map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))}),e.jsx("span",{children:a("markets.funding.column.positiveRate")})]}),dataIndex:t,width:130,align:"right",onSort:!0,render:B(2)}]},Et=t=>{let{dataSource:s,isLoading:a,pagination:i,onSort:r}=t,[o,n]=u.useState("1dPositive"),l=Wt(o,n);return e.jsx("div",{className:"w-full",children:e.jsx(ee,{columns:l,dataSource:s,loading:a,bordered:!0,onRow:()=>({className:v("oui-h-[48px] oui-cursor-pointer")}),classNames:{header:"oui-h-12"},pagination:i,onSort:r,manualSorting:!0,generatedRowKey:d=>d.symbol})})},Bt=()=>{let{pagination:t}=ne({pageSize:10}),[s]=J(W.ALL),{data:a,isLoading:i,getPositiveRates:r}=Pe(),o=Te(),{onSort:n,getSortedList:l}=ie(),{searchValue:d}=I(),m=u.useMemo(()=>{if(!(s!=null&&s.length))return[];let b=["1d","3d","7d","14d","30d","90d"].reduce((f,x)=>(f[x]=r(a,x),f),{});return s.map(f=>{var y,N,A,R,z,C,F,E,K,$,H,T;let x=f.symbol,c=a==null?void 0:a.find(D=>D.symbol===x),j=o[x],w=Ht(j("next_funding_time"),j("last_funding_rate_timestamp"));return{symbol:x,estFunding:j("est_funding_rate"),lastFunding:j("last_funding_rate"),fundingInterval:w,funding1d:((N=(y=c==null?void 0:c.funding)==null?void 0:y["1d"])==null?void 0:N.rate)??0,funding3d:((R=(A=c==null?void 0:c.funding)==null?void 0:A["3d"])==null?void 0:R.rate)??0,funding7d:((C=(z=c==null?void 0:c.funding)==null?void 0:z["7d"])==null?void 0:C.rate)??0,funding14d:((E=(F=c==null?void 0:c.funding)==null?void 0:F["14d"])==null?void 0:E.rate)??0,funding30d:(($=(K=c==null?void 0:c.funding)==null?void 0:K["30d"])==null?void 0:$.rate)??0,funding90d:((T=(H=c==null?void 0:c.funding)==null?void 0:H["90d"])==null?void 0:T.rate)??0,"1dPositive":b["1d"][x]??"-","3dPositive":b["3d"][x]??"-","7dPositive":b["7d"][x]??"-","14dPositive":b["14d"][x]??"-","30dPositive":b["30d"][x]??"-","90dPositive":b["90d"][x]??"-"}})},[s,a,o,r]),g=u.useMemo(()=>re(m,d,"base-type"),[m,d,t]);return{dataSource:u.useMemo(()=>l(g),[g,l]),isLoading:i,pagination:t,onSort:n}};function Ht(t,s){if(!t||!s)return 8;let a=t-s;return Math.round(a/36e5)}var Pt=()=>{let t=Bt();return e.jsx(Et,{...t})},be=["WOOFi Pro","Binance","OKX","Bybit","dYdX","Bitget","Kucoin"],Xt=()=>{let{pagination:t}=ne({pageSize:10}),{onSort:s,getSortedList:a}=ie(),{searchValue:i}=I(),r=Te(),{data:o,isLoading:n}=ze("/v1/public/market_info/funding_comparison"),l=u.useMemo(()=>o!=null&&o.length?o.map(m=>{let g={symbol:m.symbol};return be.forEach((b,f)=>{let x=b.toLowerCase();if(x==="woofi pro"){let j=r[m.symbol];g[`exchange_${f}`]=j("last_funding_rate")??null;return}let c=m.exchanges.find(j=>j.name.toLowerCase()===x);g[`exchange_${f}`]=(c==null?void 0:c.last)??null}),g}):[],[o,be,r]),d=u.useMemo(()=>re(l,i,"base-type"),[l,i,t]);return{data:u.useMemo(()=>a(d),[d,a]),isLoading:n,pagination:t,onSort:s}},Ut=()=>{let{t}=L();return[{title:t("markets.column.market"),dataIndex:"symbol",width:150,onSort:!0,render:s=>e.jsx(h.formatted,{rule:"symbol",formatString:"base-type",size:"xs",weight:"semibold",showIcon:!0,children:s})},...be.map((s,a)=>({title:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("img",{src:`https://oss.orderly.network/static/exchange_logo/${s.toLowerCase().replace(" ","_")}.png`,style:{width:"24px",height:"24px",objectFit:"cover",borderRadius:"50%"}}),e.jsx("span",{children:s})]}),dataIndex:`exchange_${a}`,onSort:!0,width:100,render:i=>i===null?"-":e.jsx(h.numeral,{rule:"percentages",dp:5,coloring:!0,rm:_.ROUND_DOWN,showIdentifier:!0,children:i})}))]},Kt=({data:t,isLoading:s,pagination:a})=>{let i=Ut();return e.jsx(ee,{columns:i,dataSource:t,loading:s,onRow:()=>({className:v("oui-h-[48px] oui-cursor-pointer")}),classNames:{header:"oui-h-12"},bordered:!0,pagination:a})},$t=()=>{let t=Xt();return e.jsx(Kt,{...t})},qt=t=>{let{collapsable:s,collapsed:a,onCollapse:i,activeTab:r,onTabChange:o,className:n,tabSort:l}=t,{symbol:d,onSymbolChange:m}=I(),{renderHeader:g,dataFilter:b}=Se(),f=()=>{if(!a)return e.jsx(Rt,{activeTab:r,onTabChange:o,symbol:d,onSymbolChange:m});let x=r==="favorites"?{renderHeader:g,dataFilter:b}:{};return e.jsx(de,{type:r,initialSort:l[r],collapsed:a,...x})};return e.jsxs(p,{id:"oui-side-markets",className:v("oui-font-semibold",n),direction:"column",gapY:5,height:"100%",width:"100%",children:[e.jsx(Yt,{collapsable:s,collapsed:a,onCollapse:i}),e.jsx(S,{width:"100%",className:v(a?"oui-h-[calc(100%_-_52px)]":"oui-h-[calc(100%_-_56px)]"),children:f()})]})},Yt=t=>{let{collapsable:s,collapsed:a,onCollapse:i}=t,{t:r}=L(),o=v("oui-text-base-contrast-36",s?"oui-cursor-pointer hover:oui-text-base-contrast-80":"oui-cursor-not-allowed");return a?e.jsx(ot,{className:o,onClick:()=>{i==null||i(!1)}}):e.jsxs(p,{justify:"between",px:3,width:"100%",children:[e.jsx(h,{size:"base",intensity:80,children:r("common.markets")}),e.jsx(nt,{className:o,onClick:()=>{i==null||i(!0)}})]})},Zt="orderly_side_markets_sel_tab_key";function Gt(t){let[s,a]=u.useState(t==null?void 0:t.collapsed),[i,r]=Le(Zt,"all"),{tabSort:o}=ce({storageKey:Ne}),n=u.useMemo(()=>(t==null?void 0:t.collapsable)??!0,[t==null?void 0:t.collapsable]),l=u.useCallback(d=>{typeof(t==null?void 0:t.onCollapse)=="function"?t.onCollapse(d):a(d)},[t==null?void 0:t.onCollapse]);return u.useEffect(()=>{a(t==null?void 0:t.collapsed)},[t==null?void 0:t.collapsed]),{collapsable:n,collapsed:s,onCollapse:l,activeTab:i,onTabChange:r,tabSort:o}}var wa=t=>{let s=Gt({collapsable:t.collapsable,collapsed:t.collapsed,onCollapse:t.onCollapse});return e.jsx(ae,{symbol:t.symbol,onSymbolChange:t.onSymbolChange,children:e.jsx(qt,{...s,className:t.className})})},Qt=()=>{let{t}=L();return u.useCallback((s,a=!1)=>[{title:t("common.symbol"),dataIndex:"symbol",width:150,render:(i,r)=>{let o;return a||(o=e.jsx(ue,{row:r,favorite:s,children:e.jsx(p,{width:12,height:12,justify:"center",itemAlign:"center",className:"oui-mr-1 oui-cursor-pointer",children:r.isFavorite?e.jsx(je,{className:"oui-size-3 oui-text-[rgba(255,154,46,1)]"}):e.jsx(ve,{className:"oui-size-3 oui-text-base-contrast-36 hover:oui-text-[rgba(255,154,46,1)]"})})})),e.jsxs(p,{gapX:1,children:[o,e.jsx(Y,{symbol:i,className:"oui-size-[18px]"}),e.jsx(h.formatted,{rule:"symbol",formatString:"base",size:"2xs",weight:"semibold",children:i}),e.jsxs(te,{size:"xs",color:"primary",children:[r.leverage,"x"]})]})}},{title:t("markets.column.last"),dataIndex:"24h_close",align:"right",onSort:!0,width:100,render:(i,r)=>e.jsx(h.numeral,{dp:r.quote_dp||2,size:"2xs",children:i})},{title:t("markets.column.24hPercentage"),dataIndex:"change",align:"right",onSort:!0,width:80,render:i=>e.jsx(h.numeral,{rule:"percentages",coloring:!0,rm:_.ROUND_DOWN,showIdentifier:!0,size:"2xs",children:i})},{title:t("common.volume"),dataIndex:"24h_amount",align:"right",onSort:!0,className:"oui-relative",width:80,render:(i,r)=>{let o=d=>{s.updateSymbolFavoriteState(r,s.selectedFavoriteTab,!0),d.stopPropagation()},n="oui-w-4 oui-h-4 oui-text-base-contrast-54 hover:oui-text-base-contrast",l=e.jsx("div",{className:v("oui-absolute oui-right-1 oui-top-[3px]"),children:e.jsxs(p,{className:v("oui-bg-primary-darken oui-py-[6px]","oui-hidden group-hover:oui-inline-flex"),r:"base",width:52,justify:"center",itemAlign:"end",gapX:2,children:[e.jsx(we,{className:n,onClick:d=>{d.stopPropagation(),s.pinToTop(r)}}),e.jsx(ye,{className:n,onClick:o})]})});return e.jsxs(e.Fragment,{children:[a&&l,e.jsx(h.numeral,{rule:"human",dp:2,rm:_.ROUND_DOWN,className:v(a&&"group-hover:oui-invisible"),children:i})]})}}],[t])},Jt=t=>e.jsxs(Me,{open:t.open,onOpenChange:t.onOpenChange,children:[e.jsx(De,{asChild:!0,children:t.children}),e.jsx(Ae,{children:e.jsx(Re,{onCloseAutoFocus:s=>s.preventDefault(),onClick:s=>s.stopPropagation(),align:"start",alignOffset:-32,sideOffset:20,className:v("oui-markets-dropdown-menu-content oui-bg-base-8 oui-p-0",t.contentClassName),children:e.jsx(ea,{...t,hide:t.hide})})})]}),ea=t=>{let{activeTab:s,onTabChange:a,tabSort:i,onTabSort:r}=t,{searchValue:o,onSearchValueChange:n}=I(),{t:l}=L(),d=Qt(),m=e.jsxs(p,{mx:3,gapX:3,pt:3,pb:2,children:[e.jsx(U,{value:o,onValueChange:n,placeholder:l("markets.search.placeholder"),classNames:{root:"oui-border oui-mt-[1px] oui-border-line oui-flex-1"},size:"sm",prefix:e.jsx(S,{pl:3,pr:1,children:e.jsx(se,{className:"oui-text-base-contrast-36"})}),autoComplete:"off"}),e.jsx(Fe,{size:12,className:"oui-cursor-pointer oui-text-base-contrast-80",onClick:t.hide,opacity:1})]}),g="oui-h-[calc(100%_-_36px)]",{renderHeader:b,dataFilter:f}=Se(),x=c=>{let j=c==="favorites"?{renderHeader:b,dataFilter:f}:{};return e.jsx("div",{className:g,children:e.jsx(de,{type:c,initialSort:i[c],onSort:r(c),getColumns:d,tableClassNames:{root:"!oui-bg-base-8",scroll:"oui-pb-5 oui-px-1"},rowClassName:"!oui-h-[34px]",...j})})};return e.jsxs(S,{className:v("oui-overflow-hidden oui-font-semibold"),height:"100%",intensity:800,children:[m,e.jsxs(G,{variant:"contained",size:"md",value:s,onValueChange:a,classNames:{tabsList:"oui-my-[6px] oui-px-3",tabsContent:"oui-h-full"},className:g,children:[e.jsx(M,{title:l("markets.favorites"),icon:e.jsx(le,{}),value:"favorites",children:x("favorites")}),e.jsx(M,{title:l("markets.recent"),value:"recent",children:x("recent")}),e.jsx(M,{title:l("common.all"),value:"all",children:x("all")}),e.jsx(M,{title:l("markets.newListings"),value:"newListing",children:x("newListing")})]})]})},ta="orderly_dropdown_markets_sel_tab_key",aa="orderly_dropdown_markets_tab_sort";function sa(){let[t,s]=u.useState(!1),[a,i]=Le(ta,"all"),{tabSort:r,onTabSort:o}=ce({storageKey:aa}),{clearSearchValue:n}=I(),l=()=>{s(!1)};return u.useEffect(()=>{n==null||n()},[a]),{activeTab:a,onTabChange:d=>i(d),open:t,onOpenChange:s,hide:l,tabSort:r,onTabSort:o}}var ia=t=>{let s=sa();return e.jsx(ae,{symbol:t.symbol,onSymbolChange:t.onSymbolChange,children:e.jsx(Jt,{...s,contentClassName:t.contentClassName,children:t.children})})},ra=(t,s=!1)=>[{title:Ce.t("markets.column.market&Volume"),dataIndex:"24h_amount",onSort:!0,className:"oui-h-[36px]",render:(a,i)=>e.jsxs(p,{direction:"column",itemAlign:"start",gapY:1,children:[e.jsxs(p,{gapX:1,children:[e.jsx(Y,{symbol:i.symbol,className:"oui-size-[18px]"}),e.jsx(h.formatted,{rule:"symbol",formatString:"base",size:"2xs",weight:"semibold",children:i.symbol}),e.jsxs(te,{size:"xs",color:"primary",children:[i.leverage,"x"]})]}),e.jsx(h.numeral,{intensity:54,rule:"human",dp:2,rm:_.ROUND_DOWN,children:a})]})},{title:Ce.t("markets.column.price&Change"),dataIndex:"change",align:"right",onSort:!0,className:"oui-h-[36px]",render:(a,i)=>{let r=l=>{t.updateSymbolFavoriteState(i,t.selectedFavoriteTab,!0),l.stopPropagation()},o="oui-w-4 oui-h-4 oui-text-base-contrast-54 hover:oui-text-base-contrast",n=e.jsx("div",{className:v("oui-absolute oui-right-0 oui-top-[6.5px]","oui-hidden group-hover:oui-block"),children:e.jsxs(p,{className:v("oui-inline-flex","oui-bg-primary-darken oui-py-[6px]"),r:"base",width:52,justify:"center",itemAlign:"end",gapX:2,children:[e.jsx(we,{className:o,onClick:l=>{l.stopPropagation(),t.pinToTop(i)}}),e.jsx(ye,{className:o,onClick:r})]})});return e.jsxs("div",{className:"oui-relative",children:[s&&n,e.jsxs(p,{direction:"column",justify:"end",itemAlign:"end",gapY:1,className:v(s&&"group-hover:oui-invisible"),children:[e.jsx(h.numeral,{dp:i.quote_dp||2,size:"2xs",children:i["24h_close"]}),e.jsx(h.numeral,{rule:"percentages",coloring:!0,rm:_.ROUND_DOWN,showIdentifier:!0,size:"2xs",children:a})]})]})}}],oa=t=>{let{className:s,tabSort:a,onTabSort:i}=t,{searchValue:r,onSearchValueChange:o,clearSearchValue:n}=I(),{t:l}=L(),d=e.jsx(U,{value:r,onValueChange:o,placeholder:l("markets.search.placeholder"),classNames:{root:"oui-border oui-border-line oui-mt-4"},size:"sm",prefix:e.jsx(S,{pl:3,pr:1,children:e.jsx(se,{className:"oui-text-base-contrast-36"})}),suffix:r&&e.jsx(S,{mr:2,children:e.jsx(Q,{size:14,className:"oui-cursor-pointer oui-text-base-contrast-36",onClick:n})}),autoComplete:"off"});return e.jsxs(Xe,{cols:1,className:v("oui-grid-rows-[auto,1fr] oui-font-semibold",s),height:"100%",width:"100%",children:[e.jsxs(S,{px:3,mt:3,children:[e.jsx(h,{size:"base",intensity:80,children:l("common.markets")}),d]}),e.jsx("div",{className:"oui-relative",children:e.jsx(S,{width:"100%",mt:2,className:"oui-absolute oui-inset-y-0 oui-left-0 oui-right-9",children:e.jsx(de,{type:"all",initialSort:a.all,onSort:i("all"),getColumns:ra,tableClassNames:{root:"!oui-bg-base-8",scroll:"oui-pb-[calc(env(safe-area-inset-bottom))]"}})})})]})};function na(){let{tabSort:t,onTabSort:s}=ce({storageKey:Ne});return{tabSort:t,onTabSort:s}}var ya=t=>{let s=na();return e.jsx(ae,{symbol:t.symbol,onSymbolChange:t.onSymbolChange,children:e.jsx(oa,{...s,className:t.className})})},la=t=>{let{symbol:s,data:a,leverage:i,onSymbol:r}=t,o=e.jsxs(p,{className:"oui-cursor-pointer oui-gap-x-[6px]",onClick:r,children:[e.jsx(h.formatted,{className:"oui-break-normal oui-whitespace-nowrap",rule:"symbol",formatString:"base-type",size:"sm",weight:"semibold",showIcon:!0,children:s}),e.jsx(Ee,{className:"oui-text-base-contrast-54 oui-w-[14px] oui-h-[14px]"})]});return e.jsxs(p,{className:v("oui-symbol-info-bar-mobile","oui-font-semibold oui-h-full",t.className),children:[e.jsxs(p,{gapX:3,className:"oui-flex-1 oui-overflow-hidden oui-h-full",children:[e.jsxs(p,{gapX:3,children:[o,e.jsxs(te,{size:"xs",color:"primary",children:[i,"x"]})]}),e.jsx(fe,{className:"oui-h-6",direction:"vertical",intensity:8}),e.jsx(h.numeral,{size:"2xs",rule:"percentages",coloring:!0,rm:_.ROUND_DOWN,showIdentifier:!0,children:a==null?void 0:a.change})]}),t.trailing]})};function ua(t){let{symbol:s}=t,a=Ie(s),i=Oe(),r=u.useMemo(()=>{let o=i[s],n=o("base_imr");return da(n)},[s,i]);return{symbol:s,data:a,leverage:r}}function da(t){return t?1/t:void 0}var Sa=t=>{let{symbol:s,...a}=t,i=ua({symbol:s});return e.jsx(la,{...i,...a})},ca=t=>{let{symbol:s,isFavorite:a,favorite:i,data:r,quotoDp:o,openInterest:n,fundingRate:l,containerRef:d,leadingElementRef:m,tailingElementRef:g,leadingVisible:b,tailingVisible:f,onScoll:x}=t,{t:c}=L(),j=e.jsx(ue,{row:{symbol:s},favorite:i,children:e.jsx(p,{width:12,height:12,justify:"center",itemAlign:"center",className:"oui-cursor-pointer oui-mr-1",children:a?e.jsx(je,{className:"oui-w-3 oui-h-3 oui-text-[rgba(255,154,46,1)]"}):e.jsx(ve,{className:"oui-w-3 oui-h-3 oui-text-base-contrast-36 hover:oui-text-[rgba(255,154,46,1)]"})})}),w=e.jsx(ia,{contentClassName:"oui-w-[429px] oui-h-[496px]",symbol:t.symbol,onSymbolChange:t.onSymbolChange,children:e.jsxs(p,{gapX:1,className:"oui-cursor-pointer",children:[e.jsx(Y,{symbol:s,className:"oui-w-4 oui-h-4"}),e.jsx(h.formatted,{className:"oui-break-normal oui-whitespace-nowrap",rule:"symbol",formatString:"base-type",size:"xs",weight:"semibold",intensity:98,children:s}),e.jsx(Ee,{className:"oui-text-base-contrast-54"})]})}),y=e.jsx(h.numeral,{dp:o||2,currency:"$",size:"sm",intensity:98,className:"oui-data-value",children:r==null?void 0:r["24h_close"]}),N=e.jsxs(e.Fragment,{children:[e.jsx(h.numeral,{coloring:!0,rm:_.ROUND_DOWN,showIdentifier:!0,children:r==null?void 0:r["24h_change"]}),e.jsx(h,{intensity:36,children:"/"}),e.jsx(h.numeral,{rule:"percentages",coloring:!0,rm:_.ROUND_DOWN,showIdentifier:!0,children:r==null?void 0:r.change})]});return e.jsxs(p,{className:v("oui-symbol-info-bar-desktop","oui-font-semibold oui-h-[54px]",t.className),style:{transform:"translateZ(0)",willChange:"transform"},children:[e.jsxs(p,{gapX:6,className:"oui-flex-1 oui-overflow-hidden oui-h-full",children:[e.jsxs(p,{gapX:1,children:[j,w]}),e.jsx(fe,{className:"oui-h-[26px]",direction:"vertical",intensity:8}),y,e.jsxs("div",{className:"oui-relative oui-overflow-hidden oui-h-full",children:[e.jsx("div",{ref:d,className:"oui-overflow-x-auto oui-hide-scrollbar oui-h-full",children:e.jsxs(p,{gapX:8,height:"100%",children:[e.jsx("div",{ref:m,children:e.jsx(q,{label:c("markets.column.24hChange"),value:N})}),e.jsx(q,{label:c("markets.symbolInfoBar.Mark"),value:e.jsx(h.numeral,{dp:o,"data-testid":"oui-testid-tokenInfo-markPrice-value",children:r==null?void 0:r.mark_price}),hint:c("markets.symbolInfoBar.Mark.tooltip")}),e.jsx(q,{label:c("markets.symbolInfoBar.Index"),value:e.jsx(h.numeral,{dp:o,children:r==null?void 0:r.index_price}),hint:c("markets.symbolInfoBar.Index.tooltip")}),e.jsx(q,{label:c("markets.symbolInfoBar.24hVolume"),value:e.jsx(h.numeral,{rule:"human",dp:2,children:r==null?void 0:r["24h_amount"]}),hint:c("markets.symbolInfoBar.24hVolume.tooltip")}),e.jsx(q,{label:c("markets.symbolInfoBar.predFundingRate"),value:e.jsx(ma,{symbol:s}),hint:c("markets.symbolInfoBar.predFundingRate.tooltip")}),e.jsx("div",{ref:g,children:e.jsx(q,{label:c("markets.openInterest"),value:e.jsxs(e.Fragment,{children:[e.jsx(h.numeral,{rule:"human",dp:2,children:n}),e.jsx(h,{intensity:36,children:" USDC"})]}),hint:c("markets.openInterest.tooltip")})})]})}),e.jsx(_e,{leading:!0,onClick:x,visible:b}),e.jsx(_e,{tailing:!0,onClick:x,visible:f})]})]}),t.trailing]})},q=t=>e.jsxs(p,{direction:"column",itemAlign:"start",children:[e.jsx(X,{open:t.hint?void 0:!1,content:t.hint,className:"oui-max-w-[240px] oui-bg-base-6 ",arrow:{className:"oui-fill-base-6"},delayDuration:300,children:e.jsx(h,{size:"2xs",intensity:36,className:v("oui-data-label","oui-break-normal oui-whitespace-nowrap",t.hint&&"oui-cursor-pointer oui-border-b oui-border-dashed oui-border-line-12"),children:t.label})}),e.jsx(h,{size:"2xs",intensity:98,className:v("oui-data-value","oui-leading-[20px] oui-break-normal oui-whitespace-nowrap"),children:t.value})]}),_e=t=>{let{visible:s,leading:a,tailing:i,onClick:r}=t;return s?e.jsx("button",{onClick:()=>{r==null||r(a?"left":"right")},style:{background:"linear-gradient(90deg, #07080A 0%, rgba(7, 8, 10, 0.60) 65%, rgba(7, 8, 10, 0.00) 100%)"},className:v("oui-flex oui-items-center oui-w-[80px]","oui-absolute oui-top-0 oui-bottom-0 oui-rounded-l",a&&"oui-left-0 oui-pl-1",i&&"oui-right-0 oui-pr-1 oui-rotate-180"),children:e.jsx(lt,{className:"oui-text-base-contrast-54 hover:oui-text-base-contrast-80"})}):null},ma=({symbol:t})=>{let s=Ve(t);return(s==null?void 0:s.est_funding_rate)===null?"--":e.jsxs("div",{children:[e.jsx(h.numeral,{unit:"%",dp:4,className:"oui-text-[#FF9A2E]",children:s.est_funding_rate}),e.jsx(h,{intensity:36,className:"oui-tabular-nums",children:` in ${s.countDown}`})]})};function ha(t){let{symbol:s}=t,a=Ie(s),i=Ve(s),r=Ue(),o=Oe()[s]("quote_dp"),[n,l]=u.useState(!1),[d,m]=u.useState(!1),g=u.useRef(null),b=u.useRef(null),f=u.useRef(null),x=u.useMemo(()=>!!r.favorites.find(j=>j.name===s),[r.favorites,s]),c=u.useMemo(()=>new _((a==null?void 0:a.open_interest)??0).mul((a==null?void 0:a.index_price)??0).toDecimalPlaces(2).valueOf(),[a]);return u.useEffect(()=>{let j=new IntersectionObserver(w=>{for(let y=0;y<w.length;y++){let N=w[y];N&&(N.target===b.current&&l(!N.isIntersecting),N.target===f.current&&m(!N.isIntersecting))}});return b.current&&j.observe(b.current),f.current&&j.observe(f.current),()=>{j.disconnect()}},[]),{symbol:s,isFavorite:x,favorite:r,data:a,quotoDp:o,openInterest:c,fundingRate:i,containerRef:g,leadingElementRef:b,tailingElementRef:f,leadingVisible:n,tailingVisible:d,onScoll:j=>{var w,y;j==="left"?(w=g.current)==null||w.scrollBy({left:-100,behavior:"smooth"}):(y=g.current)==null||y.scrollBy({left:100,behavior:"smooth"})}}}var Na=t=>{let{symbol:s,...a}=t,i=ha({symbol:s});return e.jsx(ca,{...i,...a})},xa=({activeFundingTab:t,onFundingTabChange:s})=>{let{searchValue:a,onSearchValueChange:i,clearSearchValue:r}=I(),{t:o}=L(),n=e.jsx(U,{value:a,onValueChange:i,placeholder:o("markets.search.placeholder"),className:"oui-w-[240px] oui-my-1",size:"sm","data-testid":"oui-testid-markets-searchMarket-input",prefix:e.jsx(S,{pl:3,pr:1,children:e.jsx(se,{className:"oui-text-base-contrast-36"})}),suffix:a&&e.jsx(S,{mr:2,children:e.jsx(Q,{size:14,className:"oui-text-base-contrast-36 oui-cursor-pointer",onClick:r})}),autoComplete:"off"});return e.jsx(S,{id:"oui-funding-list",intensity:900,p:6,mt:4,r:"2xl",children:e.jsxs(G,{variant:"contained",size:"lg",value:t,onValueChange:s,trailing:n,children:[e.jsx(M,{title:o("common.overview"),value:"overview",testid:"oui-testid-funding-overview-tab",children:e.jsx(Pt,{})}),e.jsx(M,{title:o("markets.funding.comparison"),value:"comparison",testid:"oui-testid-funding-comparison-tab",children:e.jsx($t,{})})]})})};function ga(){let[t,s]=u.useState("overview");return{activeFundingTab:t,onFundingTabChange:a=>s(a)}}var pa=()=>{let t=ga();return e.jsx(xa,{...t})},Ca=t=>{let[s,a]=u.useState("markets"),{t:i}=L();return e.jsx(ae,{onSymbolChange:t.onSymbolChange,children:e.jsx(S,{id:"oui-markets-home-page",className:v("oui-font-semibold",t.className),p:6,children:e.jsxs(G,{variant:"text",size:"xl",value:s,onValueChange:a,children:[e.jsxs(M,{title:i("common.markets"),value:"markets",testid:"oui-testid-markets-tab",children:[e.jsx(bt,{}),e.jsx(It,{})]}),e.jsx(M,{title:i("common.funding"),value:"funding",testid:"oui-testid-funding-tab",children:e.jsx(pa,{})})]})})})};export{ya as W,Sa as X,wa as m,Na as n,Ca as q};
